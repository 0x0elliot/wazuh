# Description

This testtool is used to validate the version of the matches of the VD module. It uses the `ossec.log` file to extract the matches and then compares them with the expected matches. The expected matches are defined as the result of the official tools `rpmdev-vercpm` for RPM packages and `dpkg` deb packages.


# Usage

To use this testtool, you should have Docker installed on your machine. If you don't have Docker installed, you can download it from the [official website](https://www.docker.com/products/docker-desktop).

Before use this testtool, you should check if the `Reports` folder exists and creates it if not. The `Reports` folder should contain all matches present in the `ossec.log` file for different agents. You can use the following command to extract all matches from the `ossec.log` file for a specific agent named `$AGENT_NAME` and save them to a log file in the `Reports` folder:

```bash
$ grep "DEBUG: Match found.*Agent '$AGENT_NAME'" /var/ossec/logs/ossec.log >> PATH/TO/THIS/FOLDER/$AGENT_NAME.log
```

Replace `PATH/TO/THIS/FOLDER` with the actual path to the `Reports` folder. After extracting the matches, copies the log file to the `Reports` folder and then runs the Docker containers. The validation is done automatically once the container starts.

> [!NOTE]  
> Run this tool with all logs of the same type, i.e. all logs should be RPM or DPKG. Mixing could generate wrong results.

Once installed and generated the corresponding docker images, you can run the following command to start the validation process:

```bash
docker run --rm -v /path/to/ReportsXXX:/usr/local/bin/version_verifier/Reports version_verifier_xxx
```
